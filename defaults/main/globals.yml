---
# TL;DR variables for quick use
global_api_host: ''
global_description: "Created with Ansible on {{ ansible_date_time.date }}"
global_node: ''
global_keyboard: ''

# Overwrite default variables for all VMs
global:
  acpi: 'yes'
  # Enable QEMU Agent, remember to install qemu-guest-agent on VMs 
  agent: 'yes'
  api_host: '{{ global_api_host }}'
  api_password: '{{ credentials.password if credentials.get("password") else lookup("env","PROXMOX_PASSWORD") }}'
  api_user: '{{ credentials.username if credentials.get("username") else lookup("env","PROXMOX_USER") }}'
  args: '-serial unix:/var/run/qemu-server/<vmid>.serial,server,nowait'
  autostart: 'no'
  balloon: '0'
  bios: ''
  # Boot from disk and network
  boot: 'cnd'
  bootdisk: ''
  clone: ''
  cores: '1'
  cpu: 'kvm64'
  cpulimit: ''
  cpuunits: '1000'
  delete: ''
  description: '{{ global_description }}'
  digest: ''
  # Set force to empty value because of a bug
  force: ''
  format: 'unspecified'
  freeze: ''
  full: ''
  hostpci: ''
  # Disable hotplug for 'network', 'disk', 'cpu', 'memory' and 'usb'
  hotplug: '0'
  hugepages: ''
  ide: ''
  keyboard: '{{ global_keyboard }}'
  kvm: 'yes'
  localtime: ''
  lock: ''
  machine: ''
  memory: '512'
  migrate_downtime: ''
  migrate_speed: ''
  name: ''
  net: ''
  newid: ''
  node: '{{ global_node }}'
  numa: ''
  numa_enabled: ''
  onboot: 'yes'
  ostype: 'l26'
  parallel: ''
  pool: ''
  protection: ''
  # Set behavior to compatibility because of "force" bug
  # proxmox_default_behavior: 'no_defaults'
  reboot: ''
  revert: ''
  sata: ''
  scsi: ''
  # virtio-scsi-pci for better performance
  scsihw: 'virtio-scsi-pci'
  serial: ''
  shares: ''
  skiplock: ''
  smbios: ''
  snapname: ''
  sockets: '1'
  startdate: ''
  startup: ''
  state: ''
  storage: ''
  tablet: 'no'
  target: ''
  tdf: ''
  template: 'no'
  timeout: ''
  update: ''
  validate_certs: ''
  vcpus: ''
  vga: 'std'
  virtio: ''
  vmid: ''
  watchdog: ''
